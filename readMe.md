# nft_Chess

Chess_RPC is a decentralized chess platform built using Foundry. It includes smart contracts for a chess game, an ERC-20 token (CHS) for in-game transactions, and a factory contract to deploy individual chess game instances. The project also contains deployment scripts, front-end python intreaction , and testing utilities.

## Project Structure

```
nft_Chess                          #Git repository 
├── Chess_RPC                      #Demo app with interface for interacting with contact #to do : implement it as an rpc
│   ├── abi
│   ├── bin
│   ├── include
│   ├── lib
│   ├── lib64 -> lib
│   ├── main.py                   # Python application for interacting with the contract
└── pyvenv.cfg
├── abi                        # Generated ABI files for the smart contracts
├── broadcast                  # Foundry broadcast directory for deployed transactions
├── cache                      # Foundry build cache
├── Documentation              # Additional project documentation
├── buildContract.sh           # Shell script for compiling, deploying, and generating ABIs
├── foundry.toml               # Foundry configuration file
├── lib                        # External libraries
├── out                        # Compiled contract artifacts (generated by Foundry)
├── script                     # Foundry deployment and utility scripts
├── src                        # Solidity smart contracts:
│   ├── Chess_Game_Factory.sol # Factory contract for deploying games
│   ├── Chess_ERC20_Token.sol   # ERC-20 token (CHS)
│   └── Chess_Game.sol         # Individual chess game contract
└── test                       # Test suite for smart contracts
```

## Prerequisites

- **Foundry**: Install Forge and Cast following the [Foundry installation guide](https://book.getfoundry.sh/getting-started/installation).
- **Node.js & npm**: Required for running the block explorer
- **Python 3.7+**: For any Python scripts used to interact with the contracts.
- **Ethereum RPC Provider**: Use anvil provided by foundry 

## Deployment

The provided deploy factory script (`buildContract.sh`) compiles your contracts, deploys the ChessGameFactory contract, and generates updated ABI files.

### Deploy Factory Script

The contents of `buildContract.sh`:

```bash
#!/usr/bin/env bash

# 1) Compile your contracts to ensure we have fresh artifacts
forge build

# 2) Deploy using your DeployLocal script & the local RPC node
forge script script/DeployLocal.s.sol:DeployLocal   --rpc-url http://127.0.0.1:8545   --private-key 0x2a871d0798f97d79848a013d4936a73bf4cc922c825d33c1cf7073dff6d409c6   --broadcast

# 3) Clear the old ABI files
rm abi/*

# 4) Generate ABIs for each contract & place them into chess-app/public/abi
forge inspect src/Chess_Game_Factory.sol:ChessGameFactory abi --json > abi/ChessGameFactory_abi.json
forge inspect src/Chess_ERC20_Token.sol:ChessToken abi --json        > abi/ChessToken_abi.json
forge inspect src/Chess_Game.sol:ChessGame abi --json               > abi/ChessGame_abi.json

echo "Build, deployment, and ABI generation complete!"

as /nft_Chess/buildContract.sh
```

#### How to Run the Script

1. Make sure your local Ethereum node is running (e.g., Ganache on port 8545).
2. In the project root, run:
   ```bash
   ./buildContract.sh
   ```
   This script will:
   - Compile the contracts with `forge build`
   - Deploy the factory contract using the `DeployLocal` script (with the provided private key)
   - Remove old ABI files and generate fresh ones for the ChessGameFactory, ChessToken, and ChessGame contracts
   - Output a completion message

*Note:* Review and update the private key, RPC URL, and file paths as needed for your environment.

## Interacting with the Contracts

A Python utility script (`main.py`) is provided to perform various interactions with the deployed contracts. It supports the following commands:

- **Show CHS Token Balance:**
  ```bash
  python main.py showChess <PUBLIC_ADDRESS>
  ```

- **Approve Tokens:**
  ```bash
  python main.py approveTokens <PRIVATE_KEY> <AMOUNT>
  ```

- **Create a Game:**
  ```bash
  python main.py createGame <PRIVATE_KEY> <BET_AMOUNT>
  ```

- **List Active Games:**
  ```bash
  python main.py activeGames
  ```

- **Transfer Tokens:**
  ```bash
  python main.py transferTokens <PRIVATE_KEY> <DESTINATION_PUBLIC_ADDRESS> <AMOUNT>
  ```

- **Join a Game:**
  ```bash
  python main.py joinGame <PRIVATE_KEY> <GAME_CONTRACT_ADDRESS>
  ```

For example, to join a game at address `0x7c6Ad1b5186Ba84D29655E6e4b6691F788116762`:
```bash
python main.py joinGame 856f8bad315ef4df0eb46a12bfefb9b92be8079fb660dfa51cf55b0daa628445 0x7c6Ad1b5186Ba84D29655E6e4b6691F788116762
```

## Contributing

 I : **Bogdan Togoé**. Network3.0 team. 

## License

This project is licensed under the GNU General Public License.

## Additional Information

- **Documentation**: Further documentation is available in the `Documentation/` directory.
- **Testing**: Run tests with:
  ```bash
  forge test
  ```
- **Front-end**: The front-end application is not yet avalible. Will be a follow up.

Happy exploring. 

